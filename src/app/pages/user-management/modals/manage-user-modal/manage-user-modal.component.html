<div class="modal fade" id="manageUserModal" tabindex="-1" aria-labelledby="manageUserModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="manageUserModalLabel">{{ user ? 'Edit User' : 'Add User' }}</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body" style="max-height: 70vh; overflow-y: auto;">
        <form [formGroup]="manageUserForm" (ngSubmit)="onSubmit()">
          <div class="row">
            <!-- First Column (Username and Current Password) -->
            <div class="col-lg-6 mb-3">
              <label for="username" class="form-label">Username</label>
              <input type="text" class="form-control" id="username" formControlName="username" required>
            </div>
            <div *ngIf="user" class="col-lg-6 mb-3">
              <label for="currentPassword" class="form-label">Current Password</label>
              <input type="password" class="form-control" id="currentPassword" formControlName="currentPassword"
                required>
            </div>

            <!-- Second Column (New Password and Confirm Password) -->
            <div *ngIf="user" class="col-lg-6 mb-3">
              <label for="newPassword" class="form-label">New Password</label>
              <input type="password" class="form-control" id="newPassword" formControlName="newPassword" required>
            </div>
            <div *ngIf="user" class="col-lg-6 mb-3">
              <label for="confirmPassword" class="form-label">Confirm New Password</label>
              <input type="password" class="form-control" id="confirmPassword" formControlName="confirmPassword"
                required>
            </div>

            <!-- Name and Account Type Fields -->
            <div class="col-lg-6 mb-3">
              <label for="name" class="form-label">Name</label>
              <input type="text" class="form-control" id="name" formControlName="name" required>
            </div>
            <div class="col-lg-6 mb-3">
              <label for="accountType" class="form-label">Account Type</label>
              <input type="text" class="form-control" id="accountType" formControlName="accountType" required>
            </div>
          </div>

          <div *ngFor="let accessItem of user?.access">
            <div class="row">
              <div class="col">
                <h4>Trading</h4>
                <div *ngFor="let item of trading" class="form-check">
                  <input class="form-check-input" type="checkbox" [id]="'trading-' + item" [value]="item"
                    (change)="onAccessCheckboxChange('trading', item, $event)">
                  <label class="form-check-label" [for]="'trading-' + item">
                    {{ item }}
                  </label>
                </div>
              </div>
              <div class="col">
                <h4>Services</h4>
                <div *ngFor="let item of services" class="form-check">
                  <input class="form-check-input" type="checkbox" [id]="'services-' + item" [value]="item"
                    (change)="onAccessCheckboxChange('services', item, $event)">
                  <label class="form-check-label" [for]="'services-' + item">
                    {{ item }}
                  </label>
                </div>
              </div>
            </div>
          </div>

          <div class="d-flex justify-content-end">
            <button type="submit" class="btn btn-primary">SAVE</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>